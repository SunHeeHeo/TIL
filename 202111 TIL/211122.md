# 211121 TIL

## 오늘 내가 한 것들
오늘은, 산책 신청, 수락, 거절 알람과 조회를 구현 했다!
그리고, 배포 주소를 유정님 주소에서(유료가 되어 버려서)
나의 ec2로 바꿔야 해서
프론트엔드 분들이 쓰기 전에, 
배포한 주소로 이제껏 우리가 만든 api를 포스트맨으로 다 돌려서 확인 하는 작업을 했다.(하하하..ㅋㅋ 빨리 자동배포를 해야겠다고 생각했다!)

### 오늘의 풀었던 난관
첫번째 산책 신청을 하자마자 상대 유저에게 알람이 가야 하고 (소켓)
그리고 두번째, 알람창을 GET 할때, 산책 신청 및, 쪽지 댓글 알람이 함께 떠야 했다.
세번째로, 상대가 알람을 신청하는 경우, 거절하는 경우에 따라 신청자에게 결과 알람을 다시 보내줘야 했다!

### 어떻게 하였나?
여러가지 수를 생각하면서 코드를 짰고,
산책 수락/거절에 관련된 테이블을 만들었지만,(True, False로 나타낼수 있게)
곰곰히 생각해보니,
type을 쪽지알람, 산책신청, 수락, 거절 각각 다르게 줘서 
구체적으로 말하자면,
쪽지 알람은 type = 1
산책 신청은 type = 2
이렇게 post를 해서, 프론트에게 어떤 알람이 도착했는지 알리고,
만약 산책 신청이라면, 상대 유저가 수락을 한다면,
기본 적으로 저장되어있던 type=2를
수락이면 type =3, 거절이면, type=4 로 type 값을 수정하고,
그리고, sender를 receiver로, receiver를 sender로 값을 바꿔서
테이블에 저장해서, 다시 산책 신청을 한 사람에게 알림을 보낼수 있고,알람창에서 그 바뀐 status가 조회될수 있게 했다!


### 무엇을 개선 해야 했나?
오늘은 내 말을 전달 할때, 좀 더 조리있게 말 하는 연습을 해야겠다 느꼈다.
프론트 분들에게 어떤걸 전달하려고 찾아 갔는데,
갑자기 이걸 어떻게 설명 해야 할지
머리가 하얘지는 경험을 했다.

그리고 오늘 무엇을 좀 더 해야 했나를 본다면!
첫번째, 이제 이것을 이용해, 마감처리도 해야 할 것 같고
(신청 수락 값이 산책 인원과 동일해지면 자동 마감 처리 되는 기능)
두번째는 산책한 시기가 지나면, 어떻게 유저에게 리뷰 요청을 모달창으로 띄울 것인가를 생각해봐야 할 것 같다.
마지막으로, 지금 쓰고 있는 TIL을 완성시키고, 조원들과 현 http를 https로 redirect 시킬것이다


### 구체적인 해결방법은 무엇인가?
가기전에 내가 전하고 싶은 것을 명확한 단어로 적어두기!
그리고 거기에 대한 근거 키워드들을 적어놔서
핵심만을 전달하려는 연습을 하자!


### 어제보다 나은 나였는가?
어제는 일요일이라..
어제보다 나은 오늘이 아니었겠나 싶다 ㅎㅎ
하지만, 내일은 코딩을 할때, 좀 더 집중하고 
시간을 아껴 내 공부를 더 많이 할수 있는 내가 되자!