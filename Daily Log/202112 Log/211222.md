# :rocket: 211201 TIL

## :seedling: 오늘 내가 한 것들
* 이력서 재 수정
* 협력사 지원
* 배포 502 문제 해결 (드디어..ㅠㅠㅠ 감격..)
* 오늘 안에 할 것 : 내일 모의 면접 준비(또르르..)

### :speech_balloon: 오늘의 풀었던 난관
아.... 어제까지 멘탈이 많이 나가 있었다..
아무리 해도, Https 502 에러가 해결되지 않았기 때문이다.
하지만 드디어..ㅠㅠ 해결 했다.. 행복해..ㅎㅎ

### 💫✨ 어떻게 하였나?
진짜 별짓을 다했다.
1. 팀원 도 배포를 했는데, 그 팀원은 nginx가 안깔려 있음에도 불구 하고 같은 문제가 생김을 발견, 
2. nginx 문제가 아니라고 생각 터미널에 netstat -nap 로 열려 있는 포트를 확인 - 443 빼고, 다 열려 있었다.
3. iptables -L | grep https/netstat -nap | grep :443 으로 포트가 열려 있나 확인 했는데 안 열려 있음.
4.  iptables -I INPUT 1 -p udp —dport 443 -j ACCEPT/  iptables -I INPUT 1 -p udp —dport 443 -j ACCEPT 로 포트를 열어 줌 
5. 다시 iptables -L | grep https 해보면 아무 것도 안뜸 ㅠㅠ
6. nginx 에서 nginx.conf에서 포트 443 열어줌!
7. 오 마이갓, 443 서버가 열림.. 
8. 다시 로드 밸런서 타겟 그룹 test를 함.
9. 여전히 unhealthy가 뜸
10. vpc -> 연결성 분석을 해봄 80, 443 연결 상태 가능이라고 뜸 (이쯤 부터 사실 멘붕이 옴.. 다 연결 되는데 왜 때문에 unhealthy가 뜸?)
11. 팀원가 이야기를 해서, ELB 배포가 아닌 cloud Front로 배포를 하자고 말이 됨.
12. cloud front로 배포 하니 오마이 갓 연결 됬어용 ㅠㅠㅠㅠ 흑흑.. 넘 기뽀..  
<img width="378" alt="스크린샷 2021-12-22 오후 7 54 10" src="https://user-images.githubusercontent.com/88166362/147084794-cdfe6ce8-d603-4a1d-998e-b75b85253730.png">

하지만 로드 밸런서로 왜 때문에 안된거예요?ㅠㅠ 와이.... 공부를 좀 더 해봐야 겠음.

자세한 troubleshooting은 troubleshooting 폴더에 기록 하겠다!

## 왜 문제가 생겼나?
이걸 잘 모르겠다. 이제까지 배포할때 아무 문제가 없던 elb로 왜 https연결이 안됬는지... 

### :fist: 무엇을 개선 해야 했나  그리고 구체적인 해결방법은 무엇인가?
aws를 공부를 좀 더 깊게 해야겠다는 생각을 했다.
정확히 모르니까, 이런 문제가 발생하는 거 같다.

### :muscle: 어제보다 나은 나였는가?  
글쎄요..
오늘 협력사에게 지원을 하는 날이었는데,
사실 지원을 하고 싶지가 않았다.
준비가 덜 된거 같아서..
기본적인 cs 지식이든, 코테든...
그래도, 지원을 하라는 말에,
소수 회사에만 지원을 했다.
좀 더 준비를 해서, 2개월 안에 집중적으로 회사에 지원 해볼 생각이다.
아자아자!
